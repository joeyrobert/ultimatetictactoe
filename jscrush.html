<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>JavaScript Crush by Aivo Paas</title>
</head>
<body>
<div>
	<p>
		Javascript crusher by <a href="http://twitter.com/aivopaas">@aivopaas</a>.<br>
	</p>
	<p>
		JSCrush was originally created to pack my first js1k entry, a <a href="http://js1k.com/demo/197">Tetris clone</a>.
	</p>
	<ul>
		<li>I have made some optimizations and bug fixes based on <a href="http://twitter.com/tpdown">@tpdown</a>'s crusher:</li>
		<li>Size is reported in actual bytes, not characters as it was in previous versions.</li>
		<li>Use single or double quotes, output is optimal for both.</li>
		<li><a href="http://closure-compiler.appspot.com/home">Closure-compile</a> or minify by hand before using the crusher.</li>
		<li>Single line comments, leading whitespace and linebreaks are stripped so you can easily crush commented hand-minified code.</li>
		<li>Recommended style for functions: <code>A=function(a,b,c){return a+b},B=function(a,b,c){x=A(a,2)}</code>.<br>
			Use same function signatures - exactly same parameters, to allow more compression.</li>
		<li>Try to use as few different variable names as possible.</li>
	</ul>
	<p>
		Licensed under <a href="http://opensource.org/licenses/mit-license.html">MIT license</a>.
	</p>
</div>
<script>var b=document.body;</script>
<script>_="b = \"JavaScript SourceGCRUSH</ <b></b>\" + b;Q=[];for (1000;qi-1013343992#Q.push(Strg.fromCharCoV(i))L=3].onclick=function(s){P1`(@|^)s*//.*|@+s*5`7775,X=B=s/2,WmD';S=	i;;m=c+m){M=N=e=c=0,Q;!c#q!~y#(c=y!cO){x)0xWo;}else W,t=1;X;t++)X=0;++i<s-t;)!=s.substr(i,t)E~(At)))X=t1t) {	x;(R=O[xE*j-j-(R+1)*	c)(j>M||=M#R>N)#(M=j,N=R,e=xj<1)Vlete O[x]}]=1;Wo;!ePs+c+e}c=s'\"5<s\"'\")?(BD\"',/\"/g):(B=\"'\",/'/g6D_Dsc,'7ZB)';Y  $Dm5with(_$[YE)_=zpop()e(_)';	i;4]=SF to ZiF (Z(i-S)F, Z((i/S*1e4|0)/100)+'%)'};setTimeout(\"1=e(9]`e7(_7)/,'_5L()\")`%..i5b.childKn[G rowP12 colP80></>.lengths.VxOf(.Kplace(for(.nerHTML	encoVURI(.split(\\;~j;]++)A;x  O)if(].uee).zc)#i-o[x);textaKaini=j=val+B+/g,'o={}button>)bKak;#&&5')7@[rn]Ax,j+D='E])F+'BG<br><KrePs=VdeWO=Z'+`/q--i;yQ[iEzjo(,]=";for(Y in $="zyq`ZWVPKGFEDA@75#	")with(_.split($[Y]))_=join(pop());eval(_)</script>
<!--
b.innerHTML = "JavaScript Source<br><textarea rows=12 cols=80></textarea><br><button>CRUSH</button> <b></b><br><textarea rows=12 cols=80></textarea>" + b.innerHTML;
Q=[];
for (i=1000;--i;i-10&&i-13&&i-34&&i-39&&i-92&&Q.push(String.fromCharCode(i)));
L=b.children[3].onclick=function(s){
	i=s=b.children[1].value.replace(/([\r\n]|^)\s*\/\/.*|[\r\n]+\s*/g,'').replace(/\\/g,'\\\\'),X=B=s.length/2,O=m='';
	for(S=encodeURI(i).replace(/%../g,'i').length;;m=c+m){
		for(M=N=e=c=0,i=Q.length;!c&&--i;!~s.indexOf(Q[i])&&(c=Q[i]));
		if(!c)break;
		if(O){
			o={};
			for(x in O)
				for(j=s.indexOf(x),o[x]=0;~j;o[x]++)j=s.indexOf(x,j+x.length);
			O=o;
		}else for(O=o={},t=1;X;t++)
				for(X=i=0;++i<s.length-t;)
					if(!o[x=s.substr(j=i,t)])
						if(~(j=s.indexOf(x,j+t)))
							for(X=t,o[x]=1;~j;o[x]++)j=s.indexOf(x,j+t);
		for(x in O) {
			j=encodeURI(x).replace(/%../g,'i').length;
			if(j=(R=O[x])*j-j-(R+1)*encodeURI(c).replace(/%../g,'i').length)
				(j>M||j==M&&R>N)&&(M=j,N=R,e=x);
			if(j<1)
				delete O[x]
		}
		o={};
		for(x in O)
			o[x.split(e).join(c)]=1;
		O=o;
		if(!e)break;
		s=s.split(e).join(c)+c+e
	}
	c=s.split('"').length<s.split("'").length?(B='"',/"/g):(B="'",/'/g);
	i=b.children[6].value='_='+B+s.replace(c,'\\'+B)+B+';for(Y in $='+B+m+B+')with(_.split($[Y]))_=join(pop());eval(_)';
	i=encodeURI(i).replace(/%../g,'i').length;
	b.children[4].innerHTML=S+'B to '+i+'B ('+(i=i-S)+'B, '+((i/S*1e4|0)/100)+'%)'
};
setTimeout("b.children[1].value=eval(b.children[9].innerHTML.replace(/eval\\(_\\)/,'_'));L()");
-->
</body>
</html>
